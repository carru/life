(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5:function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e);var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=[],e&&n&&(this.data=this.newBlankGrid(e,n))}var e,n,a;return e=t,a=[{key:"loopAndSet",value:function(t,e){for(var n=t[0].length,i=t.length,a=0;a<i;a++)for(var o=0;o<n;o++)t[a][o]=e(t[a][o],o,a)}},{key:"loop",value:function(t,e){for(var n=t[0].length,i=t.length,a=0;a<i;a++)for(var o=0;o<n;o++)e(t[a][o],o,a)}}],(n=[{key:"randomize",value:function(){this.loopAndSetData((function(){return Math.round(Math.random())}))}},{key:"clear",value:function(){this.loopAndSetData((function(){return 0}))}},{key:"toggleCell",value:function(t,e){this.data[e][t]=this.data[e][t]?0:1}},{key:"loopAndSetData",value:function(e){t.loopAndSet(this.data,e)}},{key:"loopData",value:function(e){t.loop(this.data,e)}},{key:"newBlankGrid",value:function(t,e){return new Array(e).fill(0).map((function(){return new Array(t).fill(0)}))}},{key:"insertPrefab",value:function(e,n,i){var a=this;t.loop(i,(function(t,i,o){t&&(a.data[n+o][e+i]=1)}))}},{key:"step",value:function(){var t=this.calculateNeighbours();this.loopAndSetData((function(e,n,i){return e&&(2===t[i][n]||3===t[i][n])||!e&&3===t[i][n]?1:0}))}},{key:"calculateNeighbours",value:function(){var e=this,n=this.newBlankGrid(this.width,this.height);return t.loopAndSet(n,(function(t,n,i){var a=0;try{a+=e.data[i-1][n-1]}catch(o){}try{a+=e.data[i-1][n]}catch(o){}try{a+=e.data[i-1][n+1]}catch(o){}try{a+=e.data[i][n-1]}catch(o){}try{a+=e.data[i][n+1]}catch(o){}try{a+=e.data[i+1][n-1]}catch(o){}try{a+=e.data[i+1][n]}catch(o){}try{a+=e.data[i+1][n+1]}catch(o){}return a})),n}},{key:"normalize",value:function(){this.loopAndSetData((function(t){return t?1:0}))}},{key:"copyAndResize",value:function(e,n){var i=this,a=this.width,o=this.height,r=this.newBlankGrid(e,n);t.loopAndSet(r,(function(t,e,n){return e<a&&n<o?i.data[n][e]:0}));var s=new t;return s.data=r,s}},{key:"width",get:function(){return this.data?this.data[0].length:0}},{key:"height",get:function(){return this.data?this.data.length:0}}])&&i(e.prototype,n),a&&i(e,a),t}();var o,r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.glider=[[0,1,0],[0,0,1],[1,1,1]],r.gosper=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],function(t){t.DARK="1",t.LIGHT="2"}(o||(o={}));var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"setRenderStatsText",value:function(e,n){t.renderStats.innerHTML="Frametime: ".concat(e.toFixed(2)," ms <br> FPS: ").concat(n.toFixed(2))}},{key:"setSimStatsText",value:function(e){t.simStats.innerHTML="Step time: ".concat(e.toFixed(2)," ms")}}],(n=null)&&s(e.prototype,n),i&&s(e,i),t}();function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}l.settings=document.getElementById("settings-btn"),l.prefabs=document.getElementById("prefabs-btn"),l.controlsPanel=document.getElementById("controls-panel"),l.renderStats=document.getElementById("render-stats"),l.themeDark=document.getElementById("dark-theme-radio"),l.themeLight=document.getElementById("light-theme-radio"),l.startRenderer=document.getElementById("start-renderer-btn"),l.stopRenderer=document.getElementById("stop-renderer-btn"),l.clearBoard=document.getElementById("clear-board-btn"),l.randomizeBoard=document.getElementById("randomize-board-btn"),l.boardWidth=document.getElementById("board-width"),l.boardHeight=document.getElementById("board-height"),l.startSimulation=document.getElementById("start-simulation-btn"),l.stopSimulation=document.getElementById("stop-simulation-btn"),l.stepSimulation=document.getElementById("step-simulation-btn"),l.simStats=document.getElementById("sim-stats"),l.speed1Simulation=document.getElementById("simulation-speed-1-btn"),l.speed2Simulation=document.getElementById("simulation-speed-2-btn"),l.speed3Simulation=document.getElementById("simulation-speed-3-btn"),l.speed4Simulation=document.getElementById("simulation-speed-4-btn"),l.prefabsPanel=document.getElementById("prefabs-panel"),l.cancelPrefab=document.getElementById("cancel-prefab-btn"),l.prefabGlider=document.getElementById("prefab-glider-btn"),l.prefabGosper=document.getElementById("prefab-gosper-btn");var u,h=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.getElementById("board"),this.ctx=this.canvas.getContext("2d"),e&&(this.board=e),this.canvas.onmousemove=function(t){return n.onMouseMove(t.clientX,t.clientY)},this.canvas.onclick=function(){return n.onMouseClick()}}var e,n,i;return e=t,(n=[{key:"start",value:function(){var t=this;this.requestID=window.requestAnimationFrame((function(e){return t.draw(e)}))}},{key:"stop",value:function(){this.requestID&&(window.cancelAnimationFrame(this.requestID),this.requestID=void 0),l.setRenderStatsText(0,0)}},{key:"onMouseMove",value:function(t,e){this.scaleFactorX&&this.scaleFactorY&&(this.highlightedCellX=Math.floor(t/this.scaleFactorX),this.highlightedCellY=Math.floor(e/this.scaleFactorY))}},{key:"onMouseClick",value:function(){this.board&&this.highlightedCellX&&this.highlightedCellY&&(this.activePrefab?(this.board.insertPrefab(this.highlightedCellX,this.highlightedCellY,this.activePrefab),this.activePrefab=void 0):this.board.toggleCell(this.highlightedCellX,this.highlightedCellY))}},{key:"draw",value:function(t){var e=this,n=t-this.prevTimestamp,i=1/(n/1e3);l.setRenderStatsText(n,i),this.prevTimestamp=t,this.board&&(this.scaleToBoardSize(),this.ctx.fillStyle=this.colors.active,this.board.loopData((function(t,n,i){t&&e.ctx.fillRect(n,i,1,1)})),void 0!==this.highlightedCellX&&void 0!==this.highlightedCellY&&(this.activePrefab?(this.ctx.fillStyle=this.colors.prefab,a.loop(this.activePrefab,(function(t,n,i){t&&e.ctx.fillRect(e.highlightedCellX+n,e.highlightedCellY+i,1,1)}))):(this.ctx.fillStyle=this.colors.highlighted,this.ctx.fillRect(this.highlightedCellX,this.highlightedCellY,1,1))),this.requestID=window.requestAnimationFrame((function(t){return e.draw(t)})))}},{key:"scaleToBoardSize",value:function(){this.board&&(this.ctx.restore(),this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this.scaleFactorX=this.canvas.width/this.board.width,this.scaleFactorY=this.canvas.height/this.board.height,this.ctx.scale(this.scaleFactorX,this.scaleFactorY))}}])&&c(e.prototype,n),i&&c(e,i),t}();function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}!function(t){t[t.NORMAL=1e3]="NORMAL",t[t.FAST=400]="FAST",t[t.FASTER=100]="FASTER",t[t.LUDICROUS=0]="LUDICROUS"}(u||(u={}));var f=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.speed=u.NORMAL,this.board=e,this.speed=n}var e,n,i;return e=t,(n=[{key:"start",value:function(){var t=this;this.intervalID||(this.intervalID=setInterval((function(){return t.loop()}),this.speed))}},{key:"stop",value:function(){this.intervalID&&(clearInterval(this.intervalID),this.intervalID=void 0),l.setSimStatsText(0)}},{key:"isRunning",value:function(){return void 0!==this.intervalID}},{key:"loop",value:function(){var t=performance.now(),e=t-this.prevTimestamp;l.setSimStatsText(e),this.prevTimestamp=t,this.board.step()}}])&&d(e.prototype,n),i&&d(e,i),t}();function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.boardWidth=50,this.boardHeight=50,this.speed=u.FAST,this.board=new a(this.boardWidth,this.boardHeight),this.board.randomize(),this.renderer=new h(this.board),this.renderer.start(),this.theme=o.DARK,this.simulationLoop=new f(this.board,this.speed),this.simulationLoop.start(),this.setUiEvents()}var e,n,i;return e=t,(n=[{key:"setUiEvents",value:function(){var t=this;l.settings.onclick=function(){return t.togglePanelDisplay(l.controlsPanel)},l.prefabs.onclick=function(){return t.togglePanelDisplay(l.prefabsPanel)},l.themeDark.onchange=function(e){return t.theme=e.target.value},l.themeLight.onchange=function(e){return t.theme=e.target.value},l.startRenderer.onclick=function(){return t.renderer.start()},l.stopRenderer.onclick=function(){return t.renderer.stop()},l.clearBoard.onclick=function(){return t.board.clear()},l.randomizeBoard.onclick=function(){return t.board.randomize()},l.boardWidth.onchange=function(){return t.onBoardSizeChange()},l.boardHeight.onchange=function(){return t.onBoardSizeChange()},l.startSimulation.onclick=function(){return t.simulationLoop.start()},l.stopSimulation.onclick=function(){return t.simulationLoop.stop()},l.stepSimulation.onclick=function(){return t.singleStep()},l.speed1Simulation.onclick=function(){return t.speed=u.NORMAL},l.speed2Simulation.onclick=function(){return t.speed=u.FAST},l.speed3Simulation.onclick=function(){return t.speed=u.FASTER},l.speed4Simulation.onclick=function(){return t.speed=u.LUDICROUS},l.cancelPrefab.onclick=function(){return t.renderer.activePrefab=void 0},l.prefabGlider.onclick=function(){return t.renderer.activePrefab=r.glider},l.prefabGosper.onclick=function(){return t.renderer.activePrefab=r.gosper}}},{key:"boardWidth",get:function(){return Number(l.boardWidth.value)},set:function(t){l.boardWidth.value=String(t)}},{key:"boardHeight",get:function(){return Number(l.boardHeight.value)},set:function(t){l.boardHeight.value=String(t)}},{key:"theme",set:function(t){switch(t){case o.DARK:document.body.className="dark-theme";break;case o.LIGHT:document.body.className="light-theme"}var e=getComputedStyle(document.body);this.renderer.colors={active:e.getPropertyValue("--activeCell"),highlighted:e.getPropertyValue("--highlightedCell"),prefab:e.getPropertyValue("--prefabCell")}}},{key:"togglePanelDisplay",value:function(t){t.classList.toggle("hidden")}},{key:"singleStep",value:function(){this.simulationLoop.stop(),this.board.step()}},{key:"speed",get:function(){return this._speed},set:function(t){this._speed=t,this.simulationLoop&&(this.simulationLoop.stop(),this.simulationLoop.speed=t,this.simulationLoop.start())}},{key:"onBoardSizeChange",value:function(){this.replaceBoard(this.board.copyAndResize(this.boardWidth,this.boardHeight))}},{key:"replaceBoard",value:function(t){this.board=t,this.renderer.board=t;var e=this.simulationLoop.isRunning();this.simulationLoop.stop(),this.simulationLoop=new f(t,this.speed),e&&this.simulationLoop.start()}}])&&m(e.prototype,n),i&&m(e,i),t}();window.onload=function(){new p}}}]);